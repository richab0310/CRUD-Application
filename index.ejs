<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Employee Management</title>
    <link rel="stylesheet" href="/style.css">
</head>

<body>
    <div class="form-container">
        <h1>Employee Registraion</h1>
        <form action="/add" method="POST">
            <input type="number" name="employeeId" placeholder="Employee ID" required>
            <input type="text" name="name" placeholder="Name" required>
            <input type="email" name="email" placeholder="Email" required>
            <input type="text" name="department" placeholder="Department" required>
            <input type="text" name="city" placeholder="City" required>
            <button type="submit">Submit</button>
        </form>
    </div>

    <!-- Popup Section -->
    <div id="popup" class="popup">
        <div class="popup-content">
            <span class="close" onclick="closePopup()">&times;</span>
            <h2>Employee List</h2>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Department</th>
                        <th>City</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% employees.forEach(emp=> { %>
                        <tr id="row-<%= emp._id %>">
                            <form action="/update/<%= emp._id %>" method="POST" class="edit-form"
                                style="display: contents;">
                                <td><input type="number" name="employeeId" value="<%= emp.employeeId %>" readonly></td>
                                <td><input type="text" name="name" value="<%= emp.name %>" readonly></td>
                                <td><input type="email" name="email" value="<%= emp.email %>" readonly></td>
                                <td><input type="text" name="department" value="<%= emp.department %>" readonly></td>
                                <td><input type="text" name="city" value="<%= emp.city %>" readonly></td>
                                <td>
                                    <button type="button" onclick="enableEdit('<%= emp._id %>')">Edit</button>
                                    <button type="submit" class="update-btn" style="display: none;">Update</button>
                                    <button type="button" class="cancel-btn" onclick="cancelEdit('<%= emp._id %>')"
                                        style="display: none;">Cancel</button>
                            </form>

                            <!-- Delete form placed inside same Actions column -->
                            <form action="/delete/<%= emp._id %>" method="POST" style="display:inline;">
                                <button type="submit"
                                    onclick="return confirm('Are you sure you want to delete this employee?')">Delete</button>
                            </form>
                            </td>
                        </tr>

                        <% }) %>
                </tbody>
            </table>
        </div>
    </div>

    <script src="/script.js"></script>
</body>

</html>